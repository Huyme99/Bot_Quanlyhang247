import binance
import time

api_key = 'YOUR_API_KEY' 
api_secret = 'YOUR_API_SECRET'

client = binance.Client(api_key, api_secret)

leaderboard_top = 3  # Số lượng top trader theo dõi
symbols = ['BTCUSDT', 'ETHUSDT', 'BNBUSDT']  # Các cặp ticker theo dõi

top_traders = []

def get_top_leaderboard():
    global top_traders
    leaderboard = client.get_leaderboard_info(symbol='BTCUSDT', limit = leaderboard_top)
    top_traders = [trader['user_data'] for trader in leaderboard] 

def copy_trade(symbol, action): 
    for trader in top_traders:
        try:
            orders = client.get_order_book(symbol=symbol, limit=5, fromSymbol=trader['symbol'], side=action)
            for order in orders: 
                if order['clientOrderId'] is None and float(order['qty']) > 0 and order['symbol'] == symbol:  
                    print(f"Copying {trader['username']} {action} {order['qty']} {symbol} at {order['price']}")
                    client.futures_order(symbol=symbol, side=action, type='MARKET', quantity=order['qty'])         
        except:
            pass  # Nếu không lấy được lệnh giao dịch thì bỏ qua

def run():
    get_top_leaderboard()
    while True:
        for symbol in symbols:
            copy_trade(symbol, 'BUY')  
            copy_trade(symbol, 'SELL')
        time.sleep(1)  

if __name__ == '__main__':  
    run()
